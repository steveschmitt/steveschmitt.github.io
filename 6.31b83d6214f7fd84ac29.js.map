{"version":3,"sources":["webpack:///./src/app/about-you/about-you.component.html","webpack:///./src/app/about-you/about-you.component.ts","webpack:///./src/app/about-you/about-you.module.ts","webpack:///./src/app/shared/nav-bottom.component.ts.NavBottomComponent.html"],"names":[],"mappings":"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","file":"6.31b83d6214f7fd84ac29.js","sourcesContent":["<div class=\"d-flex flex-column static-nav\" *ngIf=\"vm$ | async as vm\" id=\"aboutYouComponent\">\r\n  <header class=\"header-bold\">\r\n    <div class=\"standard\">\r\n      <h1>About You</h1>\r\n      <p>Welcome {{vm.user.firstName}}! This information is about you, our primary contact. <span *ngIf=\"!vm.company.isHousehold\">We\r\n          will ask you about your company signer / principal at a future stage.</span></p>\r\n    </div>\r\n  </header>\r\n\r\n  <div class=\"standard\">\r\n    <form #form=\"ngForm\" [spForceFeedback]=\"true\">\r\n      <sp-model [model]=\"vm.user\" modelType=\"User\">\r\n        <div class=\"input-group input-split\">\r\n          <sp-input name=\"firstName\" propertyName=\"firstName\" label=\"First Name\" placeholder=\"First\"></sp-input>\r\n          <sp-input name=\"lastName\" propertyName=\"lastName\" label=\"Last Name\" placeholder=\"Last\"></sp-input>\r\n        </div>\r\n\r\n        <sp-input disabled=\"true\" type=\"email\" name=\"email\" propertyName=\"email\" label=\"Email Address\"></sp-input>\r\n\r\n        <sp-input class=\"input-medium\" name=\"phone\" propertyName=\"phone\" label=\"Phone Number\" maskType=\"phone\"></sp-input>\r\n      </sp-model>\r\n\r\n      <sp-model [model]=\"vm.company\" modelType=\"Company\">\r\n        <sp-radio-group name=\"isHousehold\" propertyName=\"isHousehold\" label=\"Are you a household employer?\" tooltip=\"true\">\r\n          <span tooltipText class=\"label-tooltip\">\r\n            Select yes if you hired a household employee, such as a nanny, babysitter or caregiver, to do household\r\n            work and need to pay the required taxes.\r\n          </span>\r\n          <sp-radio-button id=\"householdNo\" [value]=false>No</sp-radio-button>\r\n          <sp-radio-button id=\"householdYes\" [value]=true>Yes</sp-radio-button>\r\n        </sp-radio-group>\r\n      </sp-model>\r\n    </form>\r\n  </div>\r\n\r\n  <sp-nav-bottom [back]=\"null\" [next]=\"next\" [disabled]=\"form.invalid\"></sp-nav-bottom>\r\n</div>\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\n\r\nimport { combineLatest, Observable, of } from 'rxjs';\r\nimport { concatMap, first, map  } from 'rxjs/operators';\r\n\r\nimport { areDifferent } from '@core/utils';\r\nimport { CompanyService, UserService } from '@entity';\r\nimport { Company, CompanyType, User } from '@model';\r\nimport { WellKnownRoutes } from '@core';\r\nimport { ChangeSetItem } from 'ngrx-data';\r\nimport { changeItemFactory as cif } from '@utils';\r\nimport { environment } from '@environment';\r\n\r\nexport interface AboutYouVm {\r\n  company: Company;\r\n  user: User;\r\n}\r\n\r\n@Component({\r\n  selector: 'sp-about-you',\r\n  templateUrl: './about-you.component.html'\r\n})\r\nexport class AboutYouComponent implements OnInit {\r\n\r\n  next: string = WellKnownRoutes.CompanyInfo;\r\n\r\n  @ViewChild('form') form = { invalid: true } as NgForm;\r\n\r\n  /** Current view model */\r\n  private vm: AboutYouVm;\r\n\r\n  /** Terminating snapshot observable of the latest Company & User.*/\r\n  private modelData$: Observable<[Company, User]>;\r\n\r\n  /** Terminating snapshot observable of the latest Company & User as a VM.*/\r\n  vm$: Observable<AboutYouVm>;\r\n\r\n  constructor(\r\n    private companyService: CompanyService,\r\n    private userService: UserService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.modelData$ = combineLatest(\r\n      this.companyService.currentCompany$,\r\n      this.userService.currentUser$)\r\n      .pipe(first());\r\n\r\n    this.vm$ = this.modelData$.pipe(\r\n      map(([company, user]) => {\r\n        // clone the current data so can mutate with ngModel\r\n        // hold a local reference of the VM for later save\r\n        return this.vm = {\r\n          company: { ...company },\r\n          user: { ...user },\r\n        };\r\n      })\r\n    );\r\n  }\r\n\r\n  canLeaveAfterSave() {\r\n    return this.save();\r\n  }\r\n\r\n  private save() {\r\n    if (!this.vm || this.form.invalid) {\r\n      return false; // don't save if form is invalid or no VM\r\n    }\r\n\r\n    // tslint:disable-next-line:prefer-const\r\n    let {company: newCompany, user: newUser} = this.vm;\r\n    const saveUrl = environment.apiRoot + '/save/companyuser';\r\n\r\n    // Get fresh Company and User and save each if it was changed here.\r\n    return this.modelData$.pipe(\r\n      concatMap(([oldCompany, oldUser]) => {\r\n        const changes: ChangeSetItem[] = [];\r\n\r\n        const isHousehold = newCompany.isHousehold;\r\n        if (isHousehold !== oldCompany.isHousehold) {\r\n\r\n          if (isHousehold) {\r\n            oldCompany.isAgricultural = false;\r\n          }\r\n          const companyType = isHousehold ? CompanyType.Household : null;\r\n          newCompany = { ...oldCompany, companyType, isHousehold };\r\n          changes.push(cif.update('Company', newCompany));\r\n        }\r\n\r\n        if (areDifferent(newUser, oldUser, 'User')) {\r\n          changes.push(cif.update('User', newUser));\r\n        }\r\n\r\n        if (changes.length) {\r\n          return this.companyService.saveEntities({ changes }, saveUrl).pipe(map((_) => true));\r\n        } else {\r\n          return of(true);\r\n        }\r\n\r\n      })\r\n    );\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { SharedModule } from '@shared/shared.module';\r\nimport { PageLeaveGuard } from '@core/routing-guards';\r\n\r\nimport { AboutYouComponent } from './about-you.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    pathMatch: 'full',\r\n    component: AboutYouComponent,\r\n    canDeactivate: [ PageLeaveGuard ]\r\n  }];\r\n\r\n@NgModule({\r\n  imports: [SharedModule, RouterModule.forChild(routes)],\r\n  declarations: [AboutYouComponent]\r\n})\r\nexport class AboutYouModule {}\r\n","\n  <div class=\"nav-button-container\">\n    <div class=\"nav-buttons d-flex justify-content-end\">\n      <a *ngIf=\"returnTo\" [routerLink]=\"[returnTo]\">\n        <button type=\"button\" class=\"btn btn-outline-secondary\" type=\"button\" [disabled]=\"disabled || disableReturnTo\"\n          id=\"navBottomReturnTo\">\n          {{returnToLabel}}\n        </button>\n      </a>\n      <a *ngIf=\"back\" [routerLink]=\"[back]\">\n        <button type=\"button\" class=\"btn btn-outline-secondary\" type=\"button\" [disabled]=\"disabled || disableBack\" id=\"navBottomBack\">\n          {{backLabel}}\n        </button>\n      </a>\n      <a *ngIf=\"next\" [routerLink]=\"[next]\">\n        <button type=\"button\" class=\"btn btn-navigation\" type=\"button\" [disabled]=\"disabled || disableNext\" id=\"navBottomNext\">\n          {{nextLabel}}\n        </button>\n      </a>\n    </div>\n  </div>\n  "],"sourceRoot":""}